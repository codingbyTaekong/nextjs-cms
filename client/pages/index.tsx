import type { NextPage } from 'next'
import Head from 'next/head'
import Link from 'next/link'
import styles from '../styles/public/index.page.module.css'
import GNB from '../components/public/GNB';
import { FontAwesomeIcon } from '@fortawesome/react-fontawesome';
import { faSearch } from '@fortawesome/pro-regular-svg-icons';
import React, { useEffect, useRef, useState } from 'react';
import { Rate } from 'antd';
const Home : NextPage = () => {
    const [isDrag, setIsDrag] = useState(false);
    const [startX, setStartX] = useState(0);
    const [movedX, setMovedX] = useState(0);
    const recentContainerRef = useRef<HTMLUListElement>(null);
    const mouseDonwScrollHandler = (e : React.MouseEvent<HTMLUListElement>) => {
        e.preventDefault();
        setIsDrag(true);
        setStartX(e.pageX);
    }
    const mouseMoveScrollHandler = (e : React.MouseEvent<HTMLUListElement>) => {
        if (isDrag) {
            setMovedX(e.pageX - startX)
        }
    }
    const clickCarkHandler = (e: React.MouseEvent<HTMLLIElement>) => {
        e.preventDefault();
        console.log("클릭")
    }
    const mouseUpScrollHandler = (e : React.MouseEvent<HTMLUListElement>) => {
        if (isDrag) {
            setStartX(0);
            setIsDrag(false);
        }
    }
    useEffect(()=> {
        if (isDrag) {
            // console.log("실제로 움직인 좌표", movedX);
            if (recentContainerRef.current) {
                const sum = recentContainerRef.current.scrollLeft + movedX / 50 * -1
                // console.log("계산한 결과 : ",sum)
                recentContainerRef.current.scrollLeft = sum
            }
        }
    }, [isDrag, movedX])
    return (
        <>
            <Head>
                <title>투어리스트</title>
                <meta name="description" content="Generated by create next app" />
            </Head>
            <GNB></GNB>
            <main className={styles.main}>
                <section className={styles.visualSectionContainer}>
                    {/* <h1 className={styles.visualTitle}>Climber를 위한 공간.&nbsp;&nbsp;<b>클라이맥스</b></h1> */}
                    <h1 className={styles.visualTitle}>Tourlist를 위한 공간.&nbsp;&nbsp;<b>가상전시관</b></h1>
                    <div className={styles.searchContainer}>
                        {/* <input type="text" name="" placeholder='클라이밍장을 검색해보세요'/> */}
                        <input type="text" name="" placeholder='전시관을 검색해보세요'/>
                        <button>
                            <FontAwesomeIcon icon={faSearch} />
                        </button>
                    </div>
                </section>
                <section className={styles.recentClimbGymListContainer}>
                    <h1>최근 뜨고 있는 전시관</h1>
                    <ul className={styles.recentClimbGymList} ref={recentContainerRef} onMouseDown={mouseDonwScrollHandler} onMouseMove={mouseMoveScrollHandler} onMouseUp={mouseUpScrollHandler} onMouseLeave={mouseUpScrollHandler}>
                        <li  className={styles.recentCard} onClick={clickCarkHandler}>
                            <h1>국립중앙박물관</h1>
                            <p>강원도 춘천시 시청길 40-1</p>
                            <div className={styles.reviewContainer}>
                                <h2>최근 후기</h2>
                                <ul>
                                    <li>좋았어요!</li>
                                    <li>진짜좋았어요진짜좋았어요진짜좋았어요</li>
                                    <li>진짜좋았어요진짜좋았어요진짜좋았어요진짜좋았어요진짜좋았어요</li>
                                </ul>
                                <div className={styles.rateContainer}>
                                    <Rate disabled defaultValue={4} />
                                    <p>
                                        <span className={styles.totalRate}>4&nbsp;</span>
                                        <span className={styles.maxRate}>/5</span>
                                    </p>
                                </div>
                            </div>
                        </li>
                        <li className={styles.recentCard}>
                            <h1>국립중앙박물관</h1>
                            <p>강원도 춘천시 시청길 40-1</p>
                        </li>
                        <li className={styles.recentCard}>
                            <h1>국립중앙박물관</h1>
                            <p>강원도 춘천시 시청길 40-1</p>
                        </li>
                        <li className={styles.recentCard}>
                            <h1>국립중앙박물관</h1>
                            <p>강원도 춘천시 시청길 40-1</p>
                        </li>
                        <li className={styles.recentCard}>
                            <h1>국립중앙박물관</h1>
                            <p>강원도 춘천시 시청길 40-1</p>
                        </li>
                    </ul>
                </section>
                

            </main>
        </>

    )
}

export default Home
